<ui:composition
    template="/WEB-INF/layouts/master.xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        

        
<!--        <div class="parallax">

            <div class="parallax-layer background"></div>-->
            
<!--<div class="background"></div>-->

            <div class="content">

    
                <div class="top-section">
                    
                    <div id="book-sales">

                        <div class="section-title-container">
                            <div class="section-title-img"></div>
                            <h1 class="section-title">Books On Sale!</h1>
                        </div>                        
                            
                        <div class="fix-image-gap">  
                            <h:form>

                                <ui:repeat value="#{theBooks.booksOnSale}" var="book">
                                    <h:commandLink action="bookDetail">
                                        <f:param name="id" value="#{book.bookId}" />

                                        <div class="book">
                                            <div class="book-thumbnail-container">
                                                <!--<div class="overlay"></div>-->
                                                <!--<div class="overlay-text"><div>View</div></div>-->
                                                <h:graphicImage class="book-thumbnail" library="images" name="#{book.isbnNumber}hi.png" />
                                            </div>
                                            <ui:fragment rendered="#{book.salePrice le 0}">
                                                <p class="book-price">#{book.listPrice}</p>
                                            </ui:fragment>
                                            <ui:fragment rendered="#{book.salePrice gt 0}">
                                                <p class="book-price"><s>#{book.listPrice}</s> <span class="sale-price">#{book.salePrice}</span></p>
                                            </ui:fragment>
                                        </div>
                                    </h:commandLink>
                                </ui:repeat>

                            </h:form>
                        </div>
                            
                        <a class="prev disabled">&#10094;</a>
                        <a class="next">&#10095;</a>
                    </div>

                    <div id="genres">
                        
                        <h1 class="section-title">Genres</h1>
                        
                        <div class="outer">
                            <h:form>
                                <ui:repeat value="#{theBooks.genres}" var="genre">
                                    <div class="genre-item">
                                        <h:graphicImage library="images" name="#{genre}.png" />
                                        <h:commandLink styleClass="genre-title" action="bookList" value="#{genre}">
                                            <f:param name="genre" value="#{genre}"/>
                                        </h:commandLink>
                                    </div>
                                </ui:repeat>
                            </h:form>
                        </div>
                    </div>

                    <div id="recent-books">

                        <div class="section-title-container">
                            <div class="section-title-img"></div>
                            <h1 class="section-title">Recent Books</h1>
                        </div>

                        <div class="fix-image-gap">
                            <h:form>

                                <ui:repeat value="#{theBooks.mostRecentBooks}" var="book">
                                    <h:commandLink action="bookDetail">
                                        <f:param name="id" value="#{book.bookId}" />

                                        <div class="book">
                                            <div class="book-thumbnail-container">
                                                <!--<div class="overlay"></div>-->
                                                <!--<div class="overlay-text"><div>View</div></div>-->
                                                <h:graphicImage class="book-thumbnail" library="images" name="#{book.isbnNumber}hi.png" />
                                            </div>
                                            <ui:fragment rendered="#{book.salePrice le 0}">
                                                <p class="book-price">#{book.listPrice}</p>
                                            </ui:fragment>
                                            <ui:fragment rendered="#{book.salePrice gt 0}">
                                                <p class="book-price"><s>#{book.listPrice}</s> <span class="sale-price">#{book.salePrice}</span></p>
                                            </ui:fragment>
                                        </div>
                                    </h:commandLink>
                                </ui:repeat>

                            </h:form>
                        </div>
                    </div>
                    
                    <div id="banner">
                        <div class="slide">
                            
                            <ui:repeat value="#{bannerBackingBean.activeBanners}" var="banner">
                                <h:outputLink styleClass="slide-link" target="_blank" value="#{banner.bannerLink}">
                                    <h:graphicImage class="slide-img" library="images" name="#{banner.bannerName}" alt="#{banner.bannerName}" />
                                </h:outputLink>
                            </ui:repeat>
                         </div>

                        <a class="prev">&#10094;</a>
                        <a class="next">&#10095;</a>

                        <div class="dots-container"></div>
                    </div>
                    
                    <div id="survey">
                            
                        <h:form id="surveyForm" rendered="#{!surveyBackingBean.showResults()}">
                            <ui:repeat value="#{surveyBackingBean.activeQuestion}" var="question">
                                <h1 class="section-title">#{question.description}</h1>

                                <h:selectOneRadio class="surveyChoices" id="surveyChoices" value="#{surveyBackingBean.answer}" required="true" requiredMessage="Please select one option">
                                    <f:selectItems value="#{surveyBackingBean.answers}" />
                                </h:selectOneRadio>
                                <h:message for="surveyChoices" />
                            </ui:repeat>

                            <h:commandButton type="submit" value="Submit" action="#{surveyBackingBean.submitVote}"/>

                        </h:form>
                        
                        <div id="surveyChart">
                            <p:chart rendered="#{surveyBackingBean.showResults()}" type="pie" model="#{surveyBackingBean.chart}" />                        
                        </div>
                        
                    </div>
                    
                    <ui:fragment rendered="#{theBooks.hasRecommendations()}">
                        <div class="recommendations">

                            <div class="section-title-container">
                                <div class="section-title-img"></div>
                                <h1 class="section-title">Recommendations</h1>
                            </div>
                            
                            <div class="fix-image-gap">
                                <h:form>

                                    <ui:repeat value="#{theBooks.recommendedBooks}" var="book">
                                        <h:commandLink action="bookDetail">
                                            <f:param name="id" value="#{book.bookId}" />

                                            <div class="book">
                                                <div class="book-thumbnail-container">
                                                    <!--<div class="overlay"></div>-->
                                                    <!--<div class="overlay-text"><div>View</div></div>-->
                                                    <h:graphicImage class="book-thumbnail" library="images" name="#{book.isbnNumber}hi.png" />
                                                </div>
                                                <ui:fragment rendered="#{book.salePrice le 0}">
                                                    <p class="book-price">#{book.listPrice}</p>
                                                </ui:fragment>
                                                <ui:fragment rendered="#{book.salePrice gt 0}">
                                                    <p class="book-price"><s>#{book.listPrice}</s> <span class="sale-price">#{book.salePrice}</span></p>
                                                </ui:fragment>
                                            </div>

                                        </h:commandLink>
                                    </ui:repeat>

                                </h:form>
                            </div>
                            
                            <a class="prev disabled">&#10094;</a>
                            <a class="next">&#10095;</a>
                        </div>
                    </ui:fragment>
        
                    <div id="rss-feed" class="mobile">

                        <form>
                            <ui:repeat value="#{rssBackingBean.articles}" var="article">
                                <div class="article">
                                    <h1 class="section-title">#{article.title}</h1>
                                    <br/>
                                    <p>#{article.description}</p>
                                    <br/>
                                    <h:outputLink target="_blank" value="#{article.link}"><b>Read More</b></h:outputLink>
                                </div>
                            </ui:repeat>
                        </form>

                        <a class="prev disabled">&#10094;</a>
                        <a class="next">&#10095;</a>
                        
                    </div>
                    <div id="rss-feed" class="desktop">

                        <form>
                            <ui:repeat value="#{rssBackingBean.articles}" var="article" size="3"><!--
                                --><div class="article">
                                    <h2>#{article.title}</h2>
                                    <br/>
                                    <p>#{article.description}</p>
                                    <br/>
                                    <h:outputLink target="_blank" value="#{article.link}"><b>Read More</b></h:outputLink>
                                </div>
                            </ui:repeat>
                        </form>
                        
                    </div>

                </div>

            </div>
            
        <!--</div>-->
        
    </ui:define>
</ui:composition>