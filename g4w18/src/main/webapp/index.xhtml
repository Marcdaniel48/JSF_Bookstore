<ui:composition
    template="/WEB-INF/layouts/master.xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <ui:define name="title">#{msgs.indexPageTitle}</ui:define>
    <ui:define name="content">
        
        <div class="parallax">

            <div class="parallax-layer background"></div>

            <div class="content">

                <div class="top-section">
                    <div id="recent-books">
                        
                        <h1 class="section-title">Recent Books</h1>
                        
                        <h:form>
                        
                            <ui:repeat value="#{theBooks.mostRecentBooks}" var="book">
                                <h:commandLink action="bookDetail">
                                    <f:param name="id" value="#{book.bookId}" />

                                    <div class="book">
                                        <div class="book-thumbnail-container">
                                            <div class="overlay"></div>
                                            <div class="overlay-text"><div>View</div></div>
                                            <h:graphicImage class="book-thumbnail" library="images" name="#{book.isbnNumber}hi.png" />
                                        </div>
                                    </div>
                                </h:commandLink>
                            </ui:repeat>
                        
                        </h:form>
                    </div>

                    <div id="genres">
                        
                        <h1 class="section-title">Genres</h1>
                        
                        <div class="outer">
                            <h:form>
                                <ui:repeat value="#{theBooks.genres}" var="genre">
                                    <h:commandLink styleClass="genre-title" action="bookList" value="#{genre}">
                                        <f:param name="genre" value="#{genre}"/>
                                    </h:commandLink>
                                </ui:repeat>
                            </h:form>
                        </div>
                    </div>
                    
                    <div id="banner">
                        <div class="slide">
                            
                            <ui:repeat value="#{bannerBackingBean.activeBanners}" var="banner">
                                <h:outputLink styleClass="slide-link" value="#{banner.bannerLink}">
                                    <h:graphicImage class="slide-img" library="images" name="#{banner.bannerName}" alt="#{banner.bannerName}" />
                                </h:outputLink>
                            </ui:repeat>
                         </div>

                        <a class="prev">&#10094;</a>
                        <a class="next">&#10095;</a>

                        <div class="dots-container"></div>
                    </div>


                    <div id="book-sales">
                        
                        <h1 class="section-title">Books On Sale!</h1>
                        
                        <h:form>
                        
                            <ui:repeat value="#{theBooks.booksOnSale}" var="book">
                                <h:commandLink action="bookDetail">
                                    <f:param name="id" value="#{book.bookId}" />

                                    <div class="book">
                                        <div class="book-thumbnail-container">
                                            <div class="overlay"></div>
                                            <div class="overlay-text"><div>View</div></div>
                                            <h:graphicImage class="book-thumbnail" library="images" name="#{book.isbnNumber}hi.png" />
                                        </div>
                                    </div>

                                </h:commandLink>
                            </ui:repeat>
                            
                        </h:form>

                        <a class="prev disabled">&#10094;</a>
                        <a class="next">&#10095;</a>
                    </div>
                    
                    <ui:fragment rendered="#{theBooks.hasRecommendations()}">
                        <div class="recommendations">

                            <h1 class="section-title">Recommendations</h1>

                            <h:form>

                                <ui:repeat value="#{theBooks.recommendedBooks}" var="book">
                                    <h:commandLink action="bookDetail">
                                        <f:param name="id" value="#{book.bookId}" />

                                        <div class="book">
                                            <div class="book-thumbnail-container">
                                                <div class="overlay"></div>
                                                <div class="overlay-text"><div>View</div></div>
                                                <h:graphicImage class="book-thumbnail" library="images" name="#{book.isbnNumber}hi.png" />
                                            </div>
                                        </div>

                                    </h:commandLink>
                                </ui:repeat>

                            </h:form>

                            <a class="prev disabled">&#10094;</a>
                            <a class="next">&#10095;</a>

                        </div>
                    </ui:fragment>
                    
                    <div id="survey">
                            
                        <h:form id="surveyForm" rendered="#{!surveyBackingBean.showResults()}">
                            <ui:repeat value="#{surveyBackingBean.activeQuestion}" var="question">
                                <h1 class="section-title">#{question.description}</h1>

                                <h:selectOneRadio class="surveyChoices" id="surveyChoices" value="#{surveyBackingBean.answer}" required="true" requiredMessage="Please select one option">
                                    <f:selectItems value="#{surveyBackingBean.answers}" />
                                </h:selectOneRadio>
                                <h:message for="surveyChoices" />
                            </ui:repeat>

                            <h:commandButton type="submit" value="Submit" action="#{surveyBackingBean.submitVote}"/>

                        </h:form>
                        
                        <div id="surveyChart">
                            <p:chart rendered="#{surveyBackingBean.showResults()}" type="pie" model="#{surveyBackingBean.chart}" />                        
                        </div>
                        
                    </div>

                                <!--
        

                    <div id="rss-feed">
                        
                        

                        <div class="center-vertical">
                            <div>
                                <ui:repeat value="#{rssBackingBean.articles}" var="article" size="1">
                                    <h2>#{article.title}</h2>
                                    <br/>
                                    <p>#{article.description}</p>
                                </ui:repeat>
                            </div>
                        </div>
                        <div class="overlay"></div>
                        <div class="overlay-text"><div>Read More</div></div>
                    </div>

                    
                    
                    
-->
                </div>

            </div>
            
        </div>
        
    </ui:define>
</ui:composition>